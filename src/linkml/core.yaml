id: https://cellcards.org/schema/cellcard-core
name: cellcard-core
title: Cell Card Core Schema
description: >-
  LinkML core schema for cell cards. 
  Classes, types, and slots that are reused in other cell card schemas.

license: https://creativecommons.org/publicdomain/zero/1.0/

imports:
  - linkml:types

prefixes:
  rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns#
  rdfs: http://www.w3.org/2000/01/rdf-schema#
  xsd: http://www.w3.org/2001/XMLSchema#
  skos: http://www.w3.org/2004/02/skos/core#
  linkml: https://w3id.org/linkml/
  dcterms: http://purl.org/dc/terms/
  cellcard: https://cellcards.org/
  obo: http://purl.obolibrary.org/obo/
  prov: http://www.w3.org/ns/prov#
  qud: http://qudt.org/1.1/schema/qudt#
  UO: http://purl.obolibrary.org/obo/UO_
  schema: https://schema.org/

default_prefix: cellcard
default_range: string

#--- subsets ---
subsets:
  provenance:
    description: >- 
      Classes and slots dervied from the PROV ontology.
    see_also: https://www.w3.org/TR/prov-o/
  attribute values:
#--- types ---
types:

  bytes:
    description: >-
      An integer value that corresponds to a size in bytes
    base: int
    uri: xsd:int
    see_also:
      - UO:0000233
  
  language code:
    description: >-
      A language code conforming to ISO_639-1
    see_also:
      - https://en.wikipedia.org/wiki/ISO_639-1
    base: str
    uri: xsd:language
  
  unit:
    base: str
    uri: xsd:string
    mappings:
      - qud:Unit
      - UO:0000000

#--- classes ---
classes:
  named thing:
    description: >-
      A databased entity or concept/class
    abstract: true
    slots:
      - id
      - name
      - title
      - description
      - alternative identifiers
      - alternative names
      - alternative titles
      - alternative descriptions

  ontology class:
    is_a: named thing
    
  #--- attribute value classes ---
  attribute value:
    description: >-
      The value for any value of a attribute for an entity. This object can hold both the un-normalized atomic
      value and the structured value
    slots:
      - was generated by
  
  quantity value:
    is_a: attribute value
    description: >-
      A simple quantity, e.g. 2cm
    slots:
      - has unit
      - has numeric value
      - has minimum numeric value
      - has maximum numeric value
    slot_usage:
      has unit:
        description: >-
          The unit of the quantity
      has numeric value:
        description: >-
          The number part of the quantity
        range:
          double
    mappings:
      - schema:QuantityValue
  
  image value:
    is_a: attribute value
    description: >-
      An attribute value representing an image.
    slots:
      - url
      - description
      - display order
      - copyright
      - image caption
      - image height
      - image width
      - image bit rate
      - image encoding format
    
    mappings:
      - schema:ImageObject
  
  text value:
    is_a: attribute value
    description: >-
      A basic string value
    slots:
      - language
      
  url value:
    is_a: attribute value
    description: >-
      A value that is a string that conforms to URL syntax
  
  person value:
    is_a: attribute value
    description: >-
      An attribute value representing a person
    slots:
      - orcid
      - profile image url
      - email
      - name
      - websites
    

  #--- provenance classes subset ---
  activity:
    description: A provence-generating activity
    in_subset: 
      - provenance
    slots:
      - id
      - name
      - started at time
      - ended at time
      - was informed by
      - was associated with
      - used
    exact_mappings:
      - prov:Activity
      
  agent:
    description: A provence-generating agent
    in_subset: 
      - provenance
    slots:
      - acted on behalf of
      - was informed by
    exact_mappings:
      - prov:Agent

#--- slots ---
slots:
  id:
    identifier: true
    multivalued: false
    description: |-
      A unique identifier for a thing.
      It MUST be either a CURIE shorthand for a URI or a complete URI
  
  name:
    multivalued: false
    range: string
    description: >-
      A human readable label for an entity
  
  title:
    range: string
    multivalued: false
    description: >-
      A name given to the entity that differs from the name/label programatically assigned to it.
    exact_mappings:
      - dcterms:title

  description:
    range: string
    multivalued: false
    description: >-
      A human-readable description of a thing.
    slot_uri: dcterms:description

  alternative names:
    aliases: synomyms
    range: string
    multivalued: true
    description: |-
      A list of alternative names used to refer to the entity.
      The distinction between name and alternative names is application-specific.
    exact_mappings:
      - dcterms:alternative
      - skos:altLabel

  alternative descriptions:
    range: string
    multivalued: true
    description: |-
      A list of alternative descriptions for the entity.
      The distinction between desciption and alternative descriptions is application-specific.
  
  alternative identifiers:
    range: string
    multivalued: true
    description: >-
      A list of alternative identifiers for the entity.
  
  alternative titles:
    range: string
    multivalued: true
    description: >-
      A list of alternative titles for the entity.
      The distinction between title and alternative titles is application-specific.
    exact_mappings:
      - dcterms:alternative
  
  email:
    description: >-
      An email address for an entity such as a person.
      This should be the primarly email address used.
    range: string
    slot_uri: schema:email
  
  websites:
    range: string
    multivalued: true
    description: >-
      A list of websites that are assocatiated with the entity.
  
  url:
    range: string
    description: >-
      Links an entity to a URL.
    comments: 
      - This might note be needed b/c of the websites attribute.
  
  display order:
    description: >-
      When rendering information, this attribute to specify the order in which the information should be rendered.
  
  #--- attribute value slots ---
  has unit:
    description: >-
      Links a quantity value to a unit
    aliases:
      - scale
    range: unit
    mappings:
      - qud:unit
      - schema:unitCode
  
  has numeric value:
    description: >-
      Links a quantity value to a number
    multivalued: false
    range: float
    mappings:
      - qud:quantityValue
      - schema:value
  
  has minimum numeric value:
    is_a: has numeric value
    description: >-
      The minimum value part, expressed as number, of the quantity value when the value covers a range.
  
  has maximum numeric value:
    is_a: has numeric value
    description: >-
      The maximum value part, expressed as number, of the quantity value when the value covers a range.
  
  term:
    range: ontology class
    description: >-
      pointer to an ontology class
    slot_uri: rdf:type
    inlined: true
    
  orcid:
    description: >-
      The ORICD of a person.
    domain: person value
    range: string

  profile image url:
    description: >-
      A url that points to an image of a person.
    domain: person value
    range: string

  language:
    range: language code
    description: >-
      Should use ISO 639-1 code e.g. "en", "fr"

  copyright:
    description: >-
      Copyright attribution for a work.

  image caption:
    domain: image value
    description: A caption placed on the image.

  image height:
    domain: image value
    description: The height of the image.

  image width:
    domain: image value
    description: The width of the image.

  image bit rate: 
    domain: image value
    description: The bit rate of the image.

  image encoding format:
    domain: image value
    description: The format (typical a MIME format) used to encode the image.

  #--- provenance slots subset ---
  started at time:
    in_subset: 
      - provenance
    range: datetime
    pattern: ^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$
    comments: >-
      The regex for ISO-8601 format was taken from here: https://www.myintervals.com/blog/2009/05/20/iso-8601-date-validation-that-doesnt-suck/
      It may not be complete, but it is good enough for now.
    exact_mappings:
      - prov:startedAtTime

  ended at time:
    in_subset: 
      - provenance
    range: datetime
    pattern: ^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$
    comments: >-
      The regex for ISO-8601 format was taken from here: https://www.myintervals.com/blog/2009/05/20/iso-8601-date-validation-that-doesnt-suck/
      It may not be complete, but it is good enough for now.
    exact_mappings:
      - prov:endedAtTime

  was informed by:
    in_subset: 
      - provenance
    range: activity
    exact_mappings:
      - prov:wasInformedBy

  was associated with:
    in_subset: 
      - provenance
    range: agent
    exact_mappings:
      - prov:wasAssociatedWith

  acted on behalf of:
    in_subset: 
      - provenance
    range: agent
    exact_mappings:
      - prov:actedOnBehalfOf

  was generated by:
    in_subset: 
      - provenance
    range: activity
    exact_mappings:
      - prov:wasGeneratedBy

  used:
    in_subset: 
      - provenance
    domain: activity
    mappings:
      - prov:used